var t=function(n,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},t(n,i)};function n(n,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}function i(t,n,i,r){for(var e,o=arguments.length,s=o<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,i):r,u=t.length-1;u>=0;u--)(e=t[u])&&(s=(o<3?e(s):o>3?e(n,i,s):e(n,i))||s);return o>3&&s&&Object.defineProperty(n,i,s),s}function r(t,n,i,r){return new(i||(i=Promise))((function(e,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function u(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(s,u)}c((r=r.apply(t,n||[])).next())}))}function e(t,n){var i,r,e,o,s={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(e=2&o[0]?r.return:o[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,o[1])).done)return e;switch(r=0,e&&(o=[2&o[0],e.value]),o[0]){case 0:case 1:e=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(e=s.trys,(e=e.length>0&&e[e.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!e||o[1]>e[0]&&o[1]<e[3])){s.label=o[1];break}if(6===o[0]&&s.label<e[1]){s.label=e[1],e=o;break}if(e&&s.label<e[2]){s.label=e[2],s.ops.push(o);break}e[2]&&s.ops.pop(),s.trys.pop();continue}o=n.call(t,s)}catch(t){o=[6,t],r=0}finally{i=e=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}function o(t){var n="function"==typeof Symbol&&Symbol.iterator,i=n&&t[n],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(t,n){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,e,o=i.call(t),s=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){e={error:t}}finally{try{r&&!r.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}return s}function u(t,n,i){if(i||2===arguments.length)for(var r,e=0,o=n.length;e<o;e++)!r&&e in n||(r||(r=Array.prototype.slice.call(n,0,e)),r[e]=n[e]);return t.concat(r||Array.prototype.slice.call(n))}function c(t){return this instanceof c?(this.v=t,this):new c(t)}function h(t,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,e=i.apply(t,n||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){e[t]&&(r[t]=function(n){return new Promise((function(i,r){o.push([t,n,i,r])>1||u(t,n)}))})}function u(t,n){try{!function(t){t.value instanceof c?Promise.resolve(t.value.v).then(h,l):a(o[0][2],t)}(e[t](n))}catch(t){a(o[0][3],t)}}function h(t){u("next",t)}function l(t){u("throw",t)}function a(t,n){t(n),o.shift(),o.length&&u(o[0][0],o[0][1])}}function l(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=t[Symbol.asyncIterator];return i?i.call(t):(t=o(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(n){return new Promise((function(r,e){(function(t,n,i,r){Promise.resolve(r).then((function(n){t({value:n,done:i})}),n)})(r,e,(n=t[i](n)).done,n.value)}))}}}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const a=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,f=Symbol(),d=new Map;class v{constructor(t,n){if(this._$cssResult$=!0,n!==f)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t}get styleSheet(){let t=d.get(this.cssText);return a&&void 0===t&&(d.set(this.cssText,t=new CSSStyleSheet),t.replaceSync(this.cssText)),t}toString(){return this.cssText}}const y=a?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let n="";for(const i of t.cssRules)n+=i.cssText;return(t=>new v("string"==typeof t?t:t+"",f))(n)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var p;const b=window.trustedTypes,w=b?b.emptyScript:"",m=window.reactiveElementPolyfillSupport,g={toAttribute(t,n){switch(n){case Boolean:t=t?w:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,n){let i=t;switch(n){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},S=(t,n)=>n!==t&&(n==n||t==t),C={attribute:!0,type:String,converter:g,reflect:!1,hasChanged:S};class $ extends HTMLElement{constructor(){super(),this._$Et=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Ei=null,this.o()}static addInitializer(t){var n;null!==(n=this.l)&&void 0!==n||(this.l=[]),this.l.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((n,i)=>{const r=this._$Eh(i,n);void 0!==r&&(this._$Eu.set(r,i),t.push(r))})),t}static createProperty(t,n=C){if(n.state&&(n.attribute=!1),this.finalize(),this.elementProperties.set(t,n),!n.noAccessor&&!this.prototype.hasOwnProperty(t)){const i="symbol"==typeof t?Symbol():"__"+t,r=this.getPropertyDescriptor(t,i,n);void 0!==r&&Object.defineProperty(this.prototype,t,r)}}static getPropertyDescriptor(t,n,i){return{get(){return this[n]},set(r){const e=this[t];this[n]=r,this.requestUpdate(t,e,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||C}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Eu=new Map,this.hasOwnProperty("properties")){const t=this.properties,n=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const i of n)this.createProperty(i,t[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const n=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)n.unshift(y(t))}else void 0!==t&&n.push(y(t));return n}static _$Eh(t,n){const i=n.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}o(){var t;this._$Ep=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Em(),this.requestUpdate(),null===(t=this.constructor.l)||void 0===t||t.forEach((t=>t(this)))}addController(t){var n,i;(null!==(n=this._$Eg)&&void 0!==n?n:this._$Eg=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(i=t.hostConnected)||void 0===i||i.call(t))}removeController(t){var n;null===(n=this._$Eg)||void 0===n||n.splice(this._$Eg.indexOf(t)>>>0,1)}_$Em(){this.constructor.elementProperties.forEach(((t,n)=>{this.hasOwnProperty(n)&&(this._$Et.set(n,this[n]),delete this[n])}))}createRenderRoot(){var t;const n=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,n)=>{a?t.adoptedStyleSheets=n.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):n.forEach((n=>{const i=document.createElement("style"),r=window.litNonce;void 0!==r&&i.setAttribute("nonce",r),i.textContent=n.cssText,t.appendChild(i)}))})(n,this.constructor.elementStyles),n}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var n;return null===(n=t.hostConnected)||void 0===n?void 0:n.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var n;return null===(n=t.hostDisconnected)||void 0===n?void 0:n.call(t)}))}attributeChangedCallback(t,n,i){this._$AK(t,i)}_$ES(t,n,i=C){var r,e;const o=this.constructor._$Eh(t,i);if(void 0!==o&&!0===i.reflect){const s=(null!==(e=null===(r=i.converter)||void 0===r?void 0:r.toAttribute)&&void 0!==e?e:g.toAttribute)(n,i.type);this._$Ei=t,null==s?this.removeAttribute(o):this.setAttribute(o,s),this._$Ei=null}}_$AK(t,n){var i,r,e;const o=this.constructor,s=o._$Eu.get(t);if(void 0!==s&&this._$Ei!==s){const t=o.getPropertyOptions(s),u=t.converter,c=null!==(e=null!==(r=null===(i=u)||void 0===i?void 0:i.fromAttribute)&&void 0!==r?r:"function"==typeof u?u:null)&&void 0!==e?e:g.fromAttribute;this._$Ei=s,this[s]=c(n,t.type),this._$Ei=null}}requestUpdate(t,n,i){let r=!0;void 0!==t&&(((i=i||this.constructor.getPropertyOptions(t)).hasChanged||S)(this[t],n)?(this._$AL.has(t)||this._$AL.set(t,n),!0===i.reflect&&this._$Ei!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,i))):r=!1),!this.isUpdatePending&&r&&(this._$Ep=this._$E_())}async _$E_(){this.isUpdatePending=!0;try{await this._$Ep}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Et&&(this._$Et.forEach(((t,n)=>this[n]=t)),this._$Et=void 0);let n=!1;const i=this._$AL;try{n=this.shouldUpdate(i),n?(this.willUpdate(i),null===(t=this._$Eg)||void 0===t||t.forEach((t=>{var n;return null===(n=t.hostUpdate)||void 0===n?void 0:n.call(t)})),this.update(i)):this._$EU()}catch(t){throw n=!1,this._$EU(),t}n&&this._$AE(i)}willUpdate(t){}_$AE(t){var n;null===(n=this._$Eg)||void 0===n||n.forEach((t=>{var n;return null===(n=t.hostUpdated)||void 0===n?void 0:n.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Ep}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,n)=>this._$ES(n,this[n],t))),this._$EC=void 0),this._$EU()}updated(t){}firstUpdated(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var x;$.finalized=!0,$.elementProperties=new Map,$.elementStyles=[],$.shadowRootOptions={mode:"open"},null==m||m({ReactiveElement:$}),(null!==(p=globalThis.reactiveElementVersions)&&void 0!==p?p:globalThis.reactiveElementVersions=[]).push("1.3.2");const A=globalThis.trustedTypes,k=A?A.createPolicy("lit-html",{createHTML:t=>t}):void 0,j=`lit$${(Math.random()+"").slice(9)}$`,E="?"+j,O=`<${E}>`,T=document,_=(t="")=>T.createComment(t),U=t=>null===t||"object"!=typeof t&&"function"!=typeof t,I=Array.isArray,M=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,R=/-->/g,P=/>/g,D=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,N=/'/g,z=/"/g,F=/^(?:script|style|textarea|title)$/i,L=(t=>(n,...i)=>({_$litType$:t,strings:n,values:i}))(1),q=Symbol.for("lit-noChange"),H=Symbol.for("lit-nothing"),J=new WeakMap,B=T.createTreeWalker(T,129,null,!1),Z=(t,n)=>{const i=t.length-1,r=[];let e,o=2===n?"<svg>":"",s=M;for(let n=0;n<i;n++){const i=t[n];let u,c,h=-1,l=0;for(;l<i.length&&(s.lastIndex=l,c=s.exec(i),null!==c);)l=s.lastIndex,s===M?"!--"===c[1]?s=R:void 0!==c[1]?s=P:void 0!==c[2]?(F.test(c[2])&&(e=RegExp("</"+c[2],"g")),s=D):void 0!==c[3]&&(s=D):s===D?">"===c[0]?(s=null!=e?e:M,h=-1):void 0===c[1]?h=-2:(h=s.lastIndex-c[2].length,u=c[1],s=void 0===c[3]?D:'"'===c[3]?z:N):s===z||s===N?s=D:s===R||s===P?s=M:(s=D,e=void 0);const a=s===D&&t[n+1].startsWith("/>")?" ":"";o+=s===M?i+O:h>=0?(r.push(u),i.slice(0,h)+"$lit$"+i.slice(h)+j+a):i+j+(-2===h?(r.push(void 0),n):a)}const u=o+(t[i]||"<?>")+(2===n?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==k?k.createHTML(u):u,r]};class K{constructor({strings:t,_$litType$:n},i){let r;this.parts=[];let e=0,o=0;const s=t.length-1,u=this.parts,[c,h]=Z(t,n);if(this.el=K.createElement(c,i),B.currentNode=this.el.content,2===n){const t=this.el.content,n=t.firstChild;n.remove(),t.append(...n.childNodes)}for(;null!==(r=B.nextNode())&&u.length<s;){if(1===r.nodeType){if(r.hasAttributes()){const t=[];for(const n of r.getAttributeNames())if(n.endsWith("$lit$")||n.startsWith(j)){const i=h[o++];if(t.push(n),void 0!==i){const t=r.getAttribute(i.toLowerCase()+"$lit$").split(j),n=/([.?@])?(.*)/.exec(i);u.push({type:1,index:e,name:n[2],strings:t,ctor:"."===n[1]?W:"?"===n[1]?tt:"@"===n[1]?nt:V})}else u.push({type:6,index:e})}for(const n of t)r.removeAttribute(n)}if(F.test(r.tagName)){const t=r.textContent.split(j),n=t.length-1;if(n>0){r.textContent=A?A.emptyScript:"";for(let i=0;i<n;i++)r.append(t[i],_()),B.nextNode(),u.push({type:2,index:++e});r.append(t[n],_())}}}else if(8===r.nodeType)if(r.data===E)u.push({type:2,index:e});else{let t=-1;for(;-1!==(t=r.data.indexOf(j,t+1));)u.push({type:7,index:e}),t+=j.length-1}e++}}static createElement(t,n){const i=T.createElement("template");return i.innerHTML=t,i}}function G(t,n,i=t,r){var e,o,s,u;if(n===q)return n;let c=void 0!==r?null===(e=i._$Cl)||void 0===e?void 0:e[r]:i._$Cu;const h=U(n)?void 0:n._$litDirective$;return(null==c?void 0:c.constructor)!==h&&(null===(o=null==c?void 0:c._$AO)||void 0===o||o.call(c,!1),void 0===h?c=void 0:(c=new h(t),c._$AT(t,i,r)),void 0!==r?(null!==(s=(u=i)._$Cl)&&void 0!==s?s:u._$Cl=[])[r]=c:i._$Cu=c),void 0!==c&&(n=G(t,c._$AS(t,n.values),c,r)),n}class Y{constructor(t,n){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var n;const{el:{content:i},parts:r}=this._$AD,e=(null!==(n=null==t?void 0:t.creationScope)&&void 0!==n?n:T).importNode(i,!0);B.currentNode=e;let o=B.nextNode(),s=0,u=0,c=r[0];for(;void 0!==c;){if(s===c.index){let n;2===c.type?n=new Q(o,o.nextSibling,this,t):1===c.type?n=new c.ctor(o,c.name,c.strings,this,t):6===c.type&&(n=new it(o,this,t)),this.v.push(n),c=r[++u]}s!==(null==c?void 0:c.index)&&(o=B.nextNode(),s++)}return e}m(t){let n=0;for(const i of this.v)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,n),n+=i.strings.length-2):i._$AI(t[n])),n++}}class Q{constructor(t,n,i,r){var e;this.type=2,this._$AH=H,this._$AN=void 0,this._$AA=t,this._$AB=n,this._$AM=i,this.options=r,this._$Cg=null===(e=null==r?void 0:r.isConnected)||void 0===e||e}get _$AU(){var t,n;return null!==(n=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==n?n:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const n=this._$AM;return void 0!==n&&11===t.nodeType&&(t=n.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,n=this){t=G(this,t,n),U(t)?t===H||null==t||""===t?(this._$AH!==H&&this._$AR(),this._$AH=H):t!==this._$AH&&t!==q&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.k(t):(t=>{var n;return I(t)||"function"==typeof(null===(n=t)||void 0===n?void 0:n[Symbol.iterator])})(t)?this.S(t):this.$(t)}M(t,n=this._$AB){return this._$AA.parentNode.insertBefore(t,n)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.M(t))}$(t){this._$AH!==H&&U(this._$AH)?this._$AA.nextSibling.data=t:this.k(T.createTextNode(t)),this._$AH=t}T(t){var n;const{values:i,_$litType$:r}=t,e="number"==typeof r?this._$AC(t):(void 0===r.el&&(r.el=K.createElement(r.h,this.options)),r);if((null===(n=this._$AH)||void 0===n?void 0:n._$AD)===e)this._$AH.m(i);else{const t=new Y(e,this),n=t.p(this.options);t.m(i),this.k(n),this._$AH=t}}_$AC(t){let n=J.get(t.strings);return void 0===n&&J.set(t.strings,n=new K(t)),n}S(t){I(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let i,r=0;for(const e of t)r===n.length?n.push(i=new Q(this.M(_()),this.M(_()),this,this.options)):i=n[r],i._$AI(e),r++;r<n.length&&(this._$AR(i&&i._$AB.nextSibling,r),n.length=r)}_$AR(t=this._$AA.nextSibling,n){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,n);t&&t!==this._$AB;){const n=t.nextSibling;t.remove(),t=n}}setConnected(t){var n;void 0===this._$AM&&(this._$Cg=t,null===(n=this._$AP)||void 0===n||n.call(this,t))}}class V{constructor(t,n,i,r,e){this.type=1,this._$AH=H,this._$AN=void 0,this.element=t,this.name=n,this._$AM=r,this.options=e,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=H}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,n=this,i,r){const e=this.strings;let o=!1;if(void 0===e)t=G(this,t,n,0),o=!U(t)||t!==this._$AH&&t!==q,o&&(this._$AH=t);else{const r=t;let s,u;for(t=e[0],s=0;s<e.length-1;s++)u=G(this,r[i+s],n,s),u===q&&(u=this._$AH[s]),o||(o=!U(u)||u!==this._$AH[s]),u===H?t=H:t!==H&&(t+=(null!=u?u:"")+e[s+1]),this._$AH[s]=u}o&&!r&&this.C(t)}C(t){t===H?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class W extends V{constructor(){super(...arguments),this.type=3}C(t){this.element[this.name]=t===H?void 0:t}}const X=A?A.emptyScript:"";class tt extends V{constructor(){super(...arguments),this.type=4}C(t){t&&t!==H?this.element.setAttribute(this.name,X):this.element.removeAttribute(this.name)}}class nt extends V{constructor(t,n,i,r,e){super(t,n,i,r,e),this.type=5}_$AI(t,n=this){var i;if((t=null!==(i=G(this,t,n,0))&&void 0!==i?i:H)===q)return;const r=this._$AH,e=t===H&&r!==H||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,o=t!==H&&(r===H||e);e&&this.element.removeEventListener(this.name,this,r),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var n,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(n=this.options)||void 0===n?void 0:n.host)&&void 0!==i?i:this.element,t):this._$AH.handleEvent(t)}}class it{constructor(t,n,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=n,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){G(this,t)}}const rt=window.litHtmlPolyfillSupport;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var et,ot;null==rt||rt(K,Q),(null!==(x=globalThis.litHtmlVersions)&&void 0!==x?x:globalThis.litHtmlVersions=[]).push("2.2.5");class st extends ${constructor(){super(...arguments),this.renderOptions={host:this},this._$Dt=void 0}createRenderRoot(){var t,n;const i=super.createRenderRoot();return null!==(t=(n=this.renderOptions).renderBefore)&&void 0!==t||(n.renderBefore=i.firstChild),i}update(t){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Dt=((t,n,i)=>{var r,e;const o=null!==(r=null==i?void 0:i.renderBefore)&&void 0!==r?r:n;let s=o._$litPart$;if(void 0===s){const t=null!==(e=null==i?void 0:i.renderBefore)&&void 0!==e?e:null;o._$litPart$=s=new Q(n.insertBefore(_(),t),t,void 0,null!=i?i:{})}return s._$AI(t),s})(n,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Dt)||void 0===t||t.setConnected(!1)}render(){return q}}st.finalized=!0,st._$litElement$=!0,null===(et=globalThis.litElementHydrateSupport)||void 0===et||et.call(globalThis,{LitElement:st});const ut=globalThis.litElementPolyfillSupport;null==ut||ut({LitElement:st}),(null!==(ot=globalThis.litElementVersions)&&void 0!==ot?ot:globalThis.litElementVersions=[]).push("3.2.0");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const ct=(t,n)=>"method"===n.kind&&n.descriptor&&!("value"in n.descriptor)?{...n,finisher(i){i.createProperty(n.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:n.key,initializer(){"function"==typeof n.initializer&&(this[n.key]=n.initializer.call(this))},finisher(i){i.createProperty(n.key,t)}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function ht(t){return(n,i)=>void 0!==i?((t,n,i)=>{n.constructor.createProperty(i,t)})(t,n,i):ct(t,n)
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}var lt;function at(t){return"function"==typeof t}function ft(t){return at(null==t?void 0:t.lift)}function dt(t){return function(n){if(ft(n))return n.lift((function(n){try{return t(n,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}null===(lt=window.HTMLSlotElement)||void 0===lt||lt.prototype.assignedElements;var vt=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function yt(t){return at(null==t?void 0:t.then)}function pt(t){var n=t((function(t){Error.call(t),t.stack=(new Error).stack}));return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var bt=pt((function(t){return function(n){t(this),this.message=n?n.length+" errors occurred during unsubscription:\n"+n.map((function(t,n){return n+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=n}}));function wt(t,n){if(t){var i=t.indexOf(n);0<=i&&t.splice(i,1)}}var mt=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}var n;return t.prototype.unsubscribe=function(){var t,n,i,r,e;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var h=o(c),l=h.next();!l.done;l=h.next()){l.value.remove(this)}}catch(n){t={error:n}}finally{try{l&&!l.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}else c.remove(this);var a=this.initialTeardown;if(at(a))try{a()}catch(t){e=t instanceof bt?t.errors:[t]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var d=o(f),v=d.next();!v.done;v=d.next()){var y=v.value;try{Ct(y)}catch(t){e=null!=e?e:[],t instanceof bt?e=u(u([],s(e)),s(t.errors)):e.push(t)}}}catch(t){i={error:t}}finally{try{v&&!v.done&&(r=d.return)&&r.call(d)}finally{if(i)throw i.error}}}if(e)throw new bt(e)}},t.prototype.add=function(n){var i;if(n&&n!==this)if(this.closed)Ct(n);else{if(n instanceof t){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=null!==(i=this._finalizers)&&void 0!==i?i:[]).push(n)}},t.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},t.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},t.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&wt(n,t)},t.prototype.remove=function(n){var i=this._finalizers;i&&wt(i,n),n instanceof t&&n._removeParent(this)},t.EMPTY=((n=new t).closed=!0,n),t}(),gt=mt.EMPTY;function St(t){return t instanceof mt||t&&"closed"in t&&at(t.remove)&&at(t.add)&&at(t.unsubscribe)}function Ct(t){at(t)?t():t.unsubscribe()}var $t={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},xt=function(t,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return setTimeout.apply(void 0,u([t,n],s(i)))};function At(t){xt((function(){throw t}))}function kt(){}function jt(t){t()}var Et=function(t){function i(n){var i=t.call(this)||this;return i.isStopped=!1,n?(i.destination=n,St(n)&&n.add(i)):i.destination=Mt,i}return n(i,t),i.create=function(t,n,i){return new Ut(t,n,i)},i.prototype.next=function(t){this.isStopped||this._next(t)},i.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},i.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},i.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},i.prototype._next=function(t){this.destination.next(t)},i.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},i.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},i}(mt),Ot=Function.prototype.bind;function Tt(t,n){return Ot.call(t,n)}var _t=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(t){It(t)}},t.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(t){It(t)}else It(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){It(t)}},t}(),Ut=function(t){function i(n,i,r){var e,o,s=t.call(this)||this;at(n)||!n?e={next:null!=n?n:void 0,error:null!=i?i:void 0,complete:null!=r?r:void 0}:s&&$t.useDeprecatedNextContext?((o=Object.create(n)).unsubscribe=function(){return s.unsubscribe()},e={next:n.next&&Tt(n.next,o),error:n.error&&Tt(n.error,o),complete:n.complete&&Tt(n.complete,o)}):e=n;return s.destination=new _t(e),s}return n(i,t),i}(Et);function It(t){At(t)}var Mt={closed:!0,next:kt,error:function(t){throw t},complete:kt},Rt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Pt(t){return t}function Dt(t){return 0===t.length?Pt:1===t.length?t[0]:function(n){return t.reduce((function(t,n){return n(t)}),n)}}var Nt=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(n){var i=new t;return i.source=this,i.operator=n,i},t.prototype.subscribe=function(t,n,i){var r,e=this,o=(r=t)&&r instanceof Et||function(t){return t&&at(t.next)&&at(t.error)&&at(t.complete)}(r)&&St(r)?t:new Ut(t,n,i);return jt((function(){var t=e,n=t.operator,i=t.source;o.add(n?n.call(o,i):i?e._subscribe(o):e._trySubscribe(o))})),o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},t.prototype.forEach=function(t,n){var i=this;return new(n=zt(n))((function(n,r){var e=new Ut({next:function(n){try{t(n)}catch(t){r(t),e.unsubscribe()}},error:r,complete:n});i.subscribe(e)}))},t.prototype._subscribe=function(t){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(t)},t.prototype[Rt]=function(){return this},t.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Dt(t)(this)},t.prototype.toPromise=function(t){var n=this;return new(t=zt(t))((function(t,i){var r;n.subscribe((function(t){return r=t}),(function(t){return i(t)}),(function(){return t(r)}))}))},t.create=function(n){return new t(n)},t}();function zt(t){var n;return null!==(n=null!=t?t:$t.Promise)&&void 0!==n?n:Promise}function Ft(t){return at(t[Rt])}function Lt(t){return Symbol.asyncIterator&&at(null==t?void 0:t[Symbol.asyncIterator])}function qt(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var Ht="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Jt(t){return at(null==t?void 0:t[Ht])}function Bt(t){return h(this,arguments,(function(){var n,i,r;return e(this,(function(e){switch(e.label){case 0:n=t.getReader(),e.label=1;case 1:e.trys.push([1,,9,10]),e.label=2;case 2:return[4,c(n.read())];case 3:return i=e.sent(),r=i.value,i.done?[4,c(void 0)]:[3,5];case 4:return[2,e.sent()];case 5:return[4,c(r)];case 6:return[4,e.sent()];case 7:return e.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}}))}))}function Zt(t){return at(null==t?void 0:t.getReader)}function Kt(t){if(t instanceof Nt)return t;if(null!=t){if(Ft(t))return e=t,new Nt((function(t){var n=e[Rt]();if(at(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(vt(t))return r=t,new Nt((function(t){for(var n=0;n<r.length&&!t.closed;n++)t.next(r[n]);t.complete()}));if(yt(t))return i=t,new Nt((function(t){i.then((function(n){t.closed||(t.next(n),t.complete())}),(function(n){return t.error(n)})).then(null,At)}));if(Lt(t))return Gt(t);if(Jt(t))return n=t,new Nt((function(t){var i,r;try{for(var e=o(n),s=e.next();!s.done;s=e.next()){var u=s.value;if(t.next(u),t.closed)return}}catch(t){i={error:t}}finally{try{s&&!s.done&&(r=e.return)&&r.call(e)}finally{if(i)throw i.error}}t.complete()}));if(Zt(t))return Gt(Bt(t))}var n,i,r,e;throw qt(t)}function Gt(t){return new Nt((function(n){(function(t,n){var i,o,s,u;return r(this,void 0,void 0,(function(){var r,c;return e(this,(function(e){switch(e.label){case 0:e.trys.push([0,5,6,11]),i=l(t),e.label=1;case 1:return[4,i.next()];case 2:if((o=e.sent()).done)return[3,4];if(r=o.value,n.next(r),n.closed)return[2];e.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=e.sent(),s={error:c},[3,11];case 6:return e.trys.push([6,,9,10]),o&&!o.done&&(u=i.return)?[4,u.call(i)]:[3,8];case 7:e.sent(),e.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return n.complete(),[2]}}))}))})(t,n).catch((function(t){return n.error(t)}))}))}function Yt(t,n,i,r,e){return new Qt(t,n,i,r,e)}var Qt=function(t){function i(n,i,r,e,o,s){var u=t.call(this,n)||this;return u.onFinalize=o,u.shouldUnsubscribe=s,u._next=i?function(t){try{i(t)}catch(t){n.error(t)}}:t.prototype._next,u._error=e?function(t){try{e(t)}catch(t){n.error(t)}finally{this.unsubscribe()}}:t.prototype._error,u._complete=r?function(){try{r()}catch(t){n.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,u}return n(i,t),i.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;t.prototype.unsubscribe.call(this),!i&&(null===(n=this.onFinalize)||void 0===n||n.call(this))}},i}(Et),Vt=function(t){function i(n,i){return t.call(this)||this}return n(i,t),i.prototype.schedule=function(t,n){return this},i}(mt),Wt=function(t,n){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];return setInterval.apply(void 0,u([t,n],s(i)))},Xt=function(t){return clearInterval(t)},tn=function(t){function i(n,i){var r=t.call(this,n,i)||this;return r.scheduler=n,r.work=i,r.pending=!1,r}return n(i,t),i.prototype.schedule=function(t,n){if(void 0===n&&(n=0),this.closed)return this;this.state=t;var i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(r,this.id,n),this},i.prototype.requestAsyncId=function(t,n,i){return void 0===i&&(i=0),Wt(t.flush.bind(t,this),i)},i.prototype.recycleAsyncId=function(t,n,i){if(void 0===i&&(i=0),null!=i&&this.delay===i&&!1===this.pending)return n;Xt(n)},i.prototype.execute=function(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(t,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},i.prototype._execute=function(t,n){var i,r=!1;try{this.work(t)}catch(t){r=!0,i=t||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i},i.prototype.unsubscribe=function(){if(!this.closed){var n=this.id,i=this.scheduler,r=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,wt(r,this),null!=n&&(this.id=this.recycleAsyncId(i,n,null)),this.delay=null,t.prototype.unsubscribe.call(this)}},i}(Vt),nn={now:function(){return(nn.delegate||Date).now()},delegate:void 0},rn=function(){function t(n,i){void 0===i&&(i=t.now),this.schedulerActionCtor=n,this.now=i}return t.prototype.schedule=function(t,n,i){return void 0===n&&(n=0),new this.schedulerActionCtor(this,t).schedule(i,n)},t.now=nn.now,t}(),en=function(t){function i(n,i){void 0===i&&(i=rn.now);var r=t.call(this,n,i)||this;return r.actions=[],r._active=!1,r._scheduled=void 0,r}return n(i,t),i.prototype.flush=function(t){var n=this.actions;if(this._active)n.push(t);else{var i;this._active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=n.shift());if(this._active=!1,i){for(;t=n.shift();)t.unsubscribe();throw i}}},i}(rn);function on(t){return(n=(i=t)[i.length-1])&&at(n.schedule)?t.pop():void 0;var n,i}function sn(t,n,i,r,e){void 0===r&&(r=0),void 0===e&&(e=!1);var o=n.schedule((function(){i(),e?t.add(this.schedule(null,r)):this.unsubscribe()}),r);if(t.add(o),!e)return o}function un(t){return dt((function(n,i){var r,e=null,o=!1;e=n.subscribe(Yt(i,void 0,void 0,(function(s){r=Kt(t(s,un(t)(n))),e?(e.unsubscribe(),e=null,r.subscribe(i)):o=!0}))),o&&(e.unsubscribe(),e=null,r.subscribe(i))}))}function cn(t,n){return void 0===n&&(n=0),dt((function(i,r){i.subscribe(Yt(r,(function(i){return sn(r,t,(function(){return r.next(i)}),n)}),(function(){return sn(r,t,(function(){return r.complete()}),n)}),(function(i){return sn(r,t,(function(){return r.error(i)}),n)})))}))}function hn(t,n){return void 0===n&&(n=0),dt((function(i,r){r.add(t.schedule((function(){return i.subscribe(r)}),n))}))}function ln(t,n){if(!t)throw new Error("Iterable cannot be null");return new Nt((function(i){sn(i,n,(function(){var r=t[Symbol.asyncIterator]();sn(i,n,(function(){r.next().then((function(t){t.done?i.complete():i.next(t.value)}))}),0,!0)}))}))}function an(t,n){if(null!=t){if(Ft(t))return function(t,n){return Kt(t).pipe(hn(n),cn(n))}(t,n);if(vt(t))return function(t,n){return new Nt((function(i){var r=0;return n.schedule((function(){r===t.length?i.complete():(i.next(t[r++]),i.closed||this.schedule())}))}))}(t,n);if(yt(t))return function(t,n){return Kt(t).pipe(hn(n),cn(n))}(t,n);if(Lt(t))return ln(t,n);if(Jt(t))return function(t,n){return new Nt((function(i){var r;return sn(i,n,(function(){r=t[Ht](),sn(i,n,(function(){var t,n,e;try{n=(t=r.next()).value,e=t.done}catch(t){return void i.error(t)}e?i.complete():i.next(n)}),0,!0)})),function(){return at(null==r?void 0:r.return)&&r.return()}}))}(t,n);if(Zt(t))return function(t,n){return ln(Bt(t),n)}(t,n)}throw qt(t)}function fn(t,n){return n?an(t,n):Kt(t)}function dn(t,n){return dt((function(i,r){var e=0;i.subscribe(Yt(r,(function(i){r.next(t.call(n,i,e++))})))}))}function vn(t,n,i){return void 0===i&&(i=1/0),at(n)?vn((function(i,r){return dn((function(t,e){return n(i,t,r,e)}))(Kt(t(i,r)))}),i):("number"==typeof n&&(i=n),dt((function(n,r){return function(t,n,i,r,e,o,s,u){var c=[],h=0,l=0,a=!1,f=function(){!a||c.length||h||n.complete()},d=function(t){return h<r?v(t):c.push(t)},v=function(t){o&&n.next(t),h++;var u=!1;Kt(i(t,l++)).subscribe(Yt(n,(function(t){null==e||e(t),o?d(t):n.next(t)}),(function(){u=!0}),void 0,(function(){if(u)try{h--;for(var t=function(){var t=c.shift();s?sn(n,s,(function(){return v(t)})):v(t)};c.length&&h<r;)t();f()}catch(t){n.error(t)}})))};return t.subscribe(Yt(n,d,(function(){a=!0,f()}))),function(){null==u||u()}}(n,r,t,i)})))}new en(tn);var yn,pn=pt((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),bn=function(t){function i(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return n(i,t),i.prototype.lift=function(t){var n=new wn(this,this);return n.operator=t,n},i.prototype._throwIfClosed=function(){if(this.closed)throw new pn},i.prototype.next=function(t){var n=this;jt((function(){var i,r;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var e=o(n.currentObservers),s=e.next();!s.done;s=e.next()){s.value.next(t)}}catch(t){i={error:t}}finally{try{s&&!s.done&&(r=e.return)&&r.call(e)}finally{if(i)throw i.error}}}}))},i.prototype.error=function(t){var n=this;jt((function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=t;for(var i=n.observers;i.length;)i.shift().error(t)}}))},i.prototype.complete=function(){var t=this;jt((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var n=t.observers;n.length;)n.shift().complete()}}))},i.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(i.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),i.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},i.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},i.prototype._innerSubscribe=function(t){var n=this,i=this,r=i.hasError,e=i.isStopped,o=i.observers;return r||e?gt:(this.currentObservers=null,o.push(t),new mt((function(){n.currentObservers=null,wt(o,t)})))},i.prototype._checkFinalizedStatuses=function(t){var n=this,i=n.hasError,r=n.thrownError,e=n.isStopped;i?t.error(r):e&&t.complete()},i.prototype.asObservable=function(){var t=new Nt;return t.source=this,t},i.create=function(t,n){return new wn(t,n)},i}(Nt),wn=function(t){function i(n,i){var r=t.call(this)||this;return r.destination=n,r.source=i,r}return n(i,t),i.prototype.next=function(t){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,t)},i.prototype.error=function(t){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,t)},i.prototype.complete=function(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)},i.prototype._subscribe=function(t){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==i?i:gt},i}(bn),mn=new Nt((function(t){return t.complete()}));function gn(t){return t<=0?function(){return mn}:dt((function(n,i){var r=0;n.subscribe(Yt(i,(function(n){++r<=t&&(i.next(n),t<=r&&i.complete())})))}))}function Sn(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=on(t);return fn(t,i)}!function(t){t.NEXT="N",t.ERROR="E",t.COMPLETE="C"}(yn||(yn={})),pt((function(t){return function(){t(this),this.name="ArgumentOutOfRangeError",this.message="argument out of range"}})),pt((function(t){return function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}})),function(t){function i(n,i){var r=t.call(this)||this;return r.source=n,r.subjectFactory=i,r._subject=null,r._refCount=0,r._connection=null,ft(n)&&(r.lift=n.lift),r}n(i,t),i.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},i.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},i.prototype._teardown=function(){this._refCount=0;var t=this._connection;this._subject=this._connection=null,null==t||t.unsubscribe()},i.prototype.connect=function(){var t=this,n=this._connection;if(!n){n=this._connection=new mt;var i=this.getSubject();n.add(this.source.subscribe(Yt(i,void 0,(function(){t._teardown(),i.complete()}),(function(n){t._teardown(),i.error(n)}),(function(){return t._teardown()})))),n.closed&&(this._connection=null,n=mt.EMPTY)}return n},i.prototype.refCount=function(){return dt((function(t,n){var i=null;t._refCount++;var r=Yt(n,void 0,void 0,void 0,(function(){if(!t||t._refCount<=0||0<--t._refCount)i=null;else{var r=t._connection,e=i;i=null,!r||e&&r!==e||r.unsubscribe(),n.unsubscribe()}}));t.subscribe(r),r.closed||(i=t.connect())}))(this)}}(Nt);var Cn=function(t){function i(n){var i=t.call(this)||this;return i._value=n,i}return n(i,t),Object.defineProperty(i.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),i.prototype._subscribe=function(n){var i=t.prototype._subscribe.call(this,n);return!i.closed&&n.next(this._value),i},i.prototype.getValue=function(){var t=this,n=t.hasError,i=t.thrownError,r=t._value;if(n)throw i;return this._throwIfClosed(),r},i.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},i}(bn);function $n(t,n,i){var r=at(t)||n||i?{next:t,error:n,complete:i}:t;return r?dt((function(t,n){var i;null===(i=r.subscribe)||void 0===i||i.call(r);var e=!0;t.subscribe(Yt(n,(function(t){var i;null===(i=r.next)||void 0===i||i.call(r,t),n.next(t)}),(function(){var t;e=!1,null===(t=r.complete)||void 0===t||t.call(r),n.complete()}),(function(t){var i;e=!1,null===(i=r.error)||void 0===i||i.call(r,t),n.error(t)}),(function(){var t,n;e&&(null===(t=r.unsubscribe)||void 0===t||t.call(r)),null===(n=r.finalize)||void 0===n||n.call(r)})))})):Pt}!function(t){function i(){var n=null!==t&&t.apply(this,arguments)||this;return n._value=null,n._hasValue=!1,n._isComplete=!1,n}n(i,t),i.prototype._checkFinalizedStatuses=function(t){var n=this,i=n.hasError,r=n._hasValue,e=n._value,o=n.thrownError,s=n.isStopped,u=n._isComplete;i?t.error(o):(s||u)&&(r&&t.next(e),t.complete())},i.prototype.next=function(t){this.isStopped||(this._value=t,this._hasValue=!0)},i.prototype.complete=function(){var n=this,i=n._hasValue,r=n._value;n._isComplete||(this._isComplete=!0,i&&t.prototype.next.call(this,r),t.prototype.complete.call(this))}}(bn),function(t){function i(n,i,r){void 0===n&&(n=1/0),void 0===i&&(i=1/0),void 0===r&&(r=nn);var e=t.call(this)||this;return e._bufferSize=n,e._windowTime=i,e._timestampProvider=r,e._buffer=[],e._infiniteTimeWindow=!0,e._infiniteTimeWindow=i===1/0,e._bufferSize=Math.max(1,n),e._windowTime=Math.max(1,i),e}n(i,t),i.prototype.next=function(n){var i=this,r=i.isStopped,e=i._buffer,o=i._infiniteTimeWindow,s=i._timestampProvider,u=i._windowTime;r||(e.push(n),!o&&e.push(s.now()+u)),this._trimBuffer(),t.prototype.next.call(this,n)},i.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(t),i=this._infiniteTimeWindow,r=this._buffer.slice(),e=0;e<r.length&&!t.closed;e+=i?1:2)t.next(r[e]);return this._checkFinalizedStatuses(t),n},i.prototype._trimBuffer=function(){var t=this,n=t._bufferSize,i=t._timestampProvider,r=t._buffer,e=t._infiniteTimeWindow,o=(e?1:2)*n;if(n<1/0&&o<r.length&&r.splice(0,r.length-o),!e){for(var s=i.now(),u=0,c=1;c<r.length&&r[c]<=s;c+=2)u=c;u&&r.splice(0,u+1)}}}(bn),pt((function(t){return function(n){t(this),this.name="SequenceError",this.message=n}})),pt((function(t){return function(n){t(this),this.name="NotFoundError",this.message=n}})),pt((function(t){return function(n){void 0===n&&(n=null),t(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=n}}));var xn,An,kn={now:function(){return(kn.delegate||performance).now()},delegate:void 0},jn={schedule:function(t){var n=requestAnimationFrame,i=cancelAnimationFrame,r=n((function(n){i=void 0,t(n)}));return new mt((function(){return null==i?void 0:i(r)}))},requestAnimationFrame:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=jn.delegate;return((null==i?void 0:i.requestAnimationFrame)||requestAnimationFrame).apply(void 0,u([],s(t)))},cancelAnimationFrame:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return cancelAnimationFrame.apply(void 0,u([],s(t)))},delegate:void 0};An=jn.schedule,new Nt((function(t){var n=new mt,i=xn||kn,r=i.now(),e=function(o){var s=i.now();t.next({timestamp:xn?s:o,elapsed:s-r}),t.closed||n.add(An(e))};return n.add(An(e)),n}));var En,On=1,Tn={};function _n(t){return t in Tn&&(delete Tn[t],!0)}var Un=function(t){var n=On++;return Tn[n]=!0,En||(En=Promise.resolve()),En.then((function(){return _n(n)&&t()})),n},In=function(t){_n(t)},Mn={setImmediate:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=Mn.delegate;return((null==i?void 0:i.setImmediate)||Un).apply(void 0,u([],s(t)))},clearImmediate:function(t){return In(t)},delegate:void 0},Rn=function(t){function i(n,i){var r=t.call(this,n,i)||this;return r.scheduler=n,r.work=i,r}return n(i,t),i.prototype.requestAsyncId=function(n,i,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,n,i,r):(n.actions.push(this),n._scheduled||(n._scheduled=Mn.setImmediate(n.flush.bind(n,void 0))))},i.prototype.recycleAsyncId=function(n,i,r){if(void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,n,i,r);n.actions.some((function(t){return t.id===i}))||(Mn.clearImmediate(i),n._scheduled=void 0)},i}(tn);new(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return n(i,t),i.prototype.flush=function(t){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var i,r=this.actions;t=t||r.shift();do{if(i=t.execute(t.state,t.delay))break}while((t=r[0])&&t.id===n&&r.shift());if(this._active=!1,i){for(;(t=r[0])&&t.id===n&&r.shift();)t.unsubscribe();throw i}},i}(en))(Rn);var Pn=function(t){function i(n,i){var r=t.call(this,n,i)||this;return r.scheduler=n,r.work=i,r}return n(i,t),i.prototype.schedule=function(n,i){return void 0===i&&(i=0),i>0?t.prototype.schedule.call(this,n,i):(this.delay=i,this.state=n,this.scheduler.flush(this),this)},i.prototype.execute=function(n,i){return i>0||this.closed?t.prototype.execute.call(this,n,i):this._execute(n,i)},i.prototype.requestAsyncId=function(n,i,r){return void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0?t.prototype.requestAsyncId.call(this,n,i,r):n.flush(this)},i}(tn);new(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return n(i,t),i}(en))(Pn);var Dn=function(t){function i(n,i){var r=t.call(this,n,i)||this;return r.scheduler=n,r.work=i,r}return n(i,t),i.prototype.requestAsyncId=function(n,i,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,n,i,r):(n.actions.push(this),n._scheduled||(n._scheduled=jn.requestAnimationFrame((function(){return n.flush(void 0)}))))},i.prototype.recycleAsyncId=function(n,i,r){if(void 0===r&&(r=0),null!=r&&r>0||null==r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,n,i,r);n.actions.some((function(t){return t.id===i}))||(jn.cancelAnimationFrame(i),n._scheduled=void 0)},i}(tn);new(function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return n(i,t),i.prototype.flush=function(t){this._active=!0;var n=this._scheduled;this._scheduled=void 0;var i,r=this.actions;t=t||r.shift();do{if(i=t.execute(t.state,t.delay))break}while((t=r[0])&&t.id===n&&r.shift());if(this._active=!1,i){for(;(t=r[0])&&t.id===n&&r.shift();)t.unsubscribe();throw i}},i}(en))(Dn),function(t){function i(n,i){void 0===n&&(n=Nn),void 0===i&&(i=1/0);var r=t.call(this,n,(function(){return r.frame}))||this;return r.maxFrames=i,r.frame=0,r.index=-1,r}n(i,t),i.prototype.flush=function(){for(var t,n,i=this.actions,r=this.maxFrames;(n=i[0])&&n.delay<=r&&(i.shift(),this.frame=n.delay,!(t=n.execute(n.state,n.delay))););if(t){for(;n=i.shift();)n.unsubscribe();throw t}},i.frameTimeFactor=10}(en);var Nn=function(t){function i(n,i,r){void 0===r&&(r=n.index+=1);var e=t.call(this,n,i)||this;return e.scheduler=n,e.work=i,e.index=r,e.active=!0,e.index=n.index=r,e}return n(i,t),i.prototype.schedule=function(n,r){if(void 0===r&&(r=0),Number.isFinite(r)){if(!this.id)return t.prototype.schedule.call(this,n,r);this.active=!1;var e=new i(this.scheduler,this.work);return this.add(e),e.schedule(n,r)}return mt.EMPTY},i.prototype.requestAsyncId=function(t,n,r){void 0===r&&(r=0),this.delay=t.frame+r;var e=t.actions;return e.push(this),e.sort(i.sortActions),!0},i.prototype.recycleAsyncId=function(t,n,i){},i.prototype._execute=function(n,i){if(!0===this.active)return t.prototype._execute.call(this,n,i)},i.sortActions=function(t,n){return t.delay===n.delay?t.index===n.index?0:t.index>n.index?1:-1:t.delay>n.delay?1:-1},i}(tn);new Nt(kt);const zn=[{production:!1,name:"local",api:{baseUrl:"api.onrally.dev",version:"v1"}},{production:!0,name:"stage",api:{baseUrl:"api.onrally.dev",version:"v1"}},{production:!0,name:"sandbox",api:{baseUrl:"api.sandbox.onrally.com",version:"v1"}},{production:!0,name:"production",api:{baseUrl:"api.onrally.com",version:"v1"}},{production:!1,name:"develop",api:{baseUrl:"develop.api.onrally.dev",version:"v1"}}].find((t=>"production"===t.name));class Fn{constructor(t){this.storage=t}static persistent(){return new Fn(localStorage)}static session(){return new Fn(sessionStorage)}set(t,n){void 0===n?this.storage.removeItem(t):this.storage.setItem(t,JSON.stringify(n))}get(t){const n=this.storage.getItem(t);return n?JSON.parse(n):null}remove(t){this.hasKey(t)&&this.storage.removeItem(t)}removeAll(){this.storage.clear()}hasKey(t){return null!==this.storage.getItem(t)&&void 0!==this.storage.getItem(t)}}var Ln=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var n=Object.prototype.toString.call(t);return"[object RegExp]"===n||"[object Date]"===n||function(t){return t.$$typeof===qn}(t)}(t)};var qn="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function Hn(t,n){return!1!==n.clone&&n.isMergeableObject(t)?Gn((i=t,Array.isArray(i)?[]:{}),t,n):t;var i}function Jn(t,n,i){return t.concat(n).map((function(t){return Hn(t,i)}))}function Bn(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(n){return t.propertyIsEnumerable(n)})):[]}(t))}function Zn(t,n){try{return n in t}catch(t){return!1}}function Kn(t,n,i){var r={};return i.isMergeableObject(t)&&Bn(t).forEach((function(n){r[n]=Hn(t[n],i)})),Bn(n).forEach((function(e){(function(t,n){return Zn(t,n)&&!(Object.hasOwnProperty.call(t,n)&&Object.propertyIsEnumerable.call(t,n))})(t,e)||(Zn(t,e)&&i.isMergeableObject(n[e])?r[e]=function(t,n){if(!n.customMerge)return Gn;var i=n.customMerge(t);return"function"==typeof i?i:Gn}(e,i)(t[e],n[e],i):r[e]=Hn(n[e],i))})),r}function Gn(t,n,i){(i=i||{}).arrayMerge=i.arrayMerge||Jn,i.isMergeableObject=i.isMergeableObject||Ln,i.cloneUnlessOtherwiseSpecified=Hn;var r=Array.isArray(n);return r===Array.isArray(t)?r?i.arrayMerge(t,n,i):Kn(t,n,i):Hn(n,i)}Gn.all=function(t,n){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,i){return Gn(t,i,n)}),{})};var Yn=Gn;function Qn(t,n,i=[],r=[]){if(t===n)return!0;if("object"!=typeof t||"object"!=typeof n||null===t||null===n)return!1;const e=Object.keys(t).filter((t=>!i.includes(t))).filter((t=>!(r.length>0)||r.includes(t))),o=Object.keys(n).filter((t=>!i.includes(t))).filter((t=>!(r.length>0)||r.includes(t)));if(e.length!==o.length)return!1;for(const i of e){if(!o.includes(i))return!1;if("function"==typeof t[i]||"function"==typeof n[i]){if(t[i].toString()!==n[i].toString())return!1}else if(!Qn(t[i],n[i]))return!1}return!0}function Vn(t,n,i=!0){return"object"!=typeof n||null===n?n:Yn(t,n,{arrayMerge:Wn,isMergeableObject:Xn,customMerge:i?ti:void 0})}const Wn=(t,n,i)=>{const r=null==t?void 0:t.slice();return null==n||n.forEach(((n,e)=>{void 0===r[e]?r[e]=i.cloneUnlessOtherwiseSpecified(n,i):i.isMergeableObject(n)?r[e]=Yn(t[e],n,i):-1===t.indexOf(n)&&r.push(n)})),r},Xn=t=>{if("[object Object]"!==Object.prototype.toString.call(t))return!1;const n=Object.getPrototypeOf(t);return null===n||n===Object.prototype},ti=(t,n)=>{if("validators"===t)return ni},ni=(t,n,i)=>{const r=t.customValidators||[],e=n.customValidators||[];delete t.customValidators,delete n.customValidators;const o=Yn(t,n,i);return o.customValidators=[...r||[],...e||[]],o};function ii(t,n){if(t)return"object"!=typeof t?t:Object.keys(t).reduce(((i,r)=>{const e=function(t,n,i="_"){if(n===ei.CamelCase){const n=new RegExp(`(${i}[a-z])`,"g");t=t.replace(n,(t=>t.toUpperCase().replace(i,"")))}else t=t.replace(/([a-z])([A-Z])/g,`$1${i}$2`).toLowerCase();return t}(r,n);return t[r]instanceof Array?i[e]=t[r].map((t=>ri(t,n))):t[r]instanceof Object?i[e]=ri(t[r],n):i[e]=t[r],i}),{})}function ri(t,n=ei.CamelCase){if(t)return"object"!=typeof t?t:Array.isArray(t)?t.map((t=>ii(t,n))):ii(t,n)}var ei;!function(t){t.Underscore="underscore",t.CamelCase="camelCase"}(ei||(ei={}));const oi=new class{constructor(){this.clientId=new Cn(""),this.config={redirect:!0,enableLoader:!1,cartData:{},customActionsHandler:()=>{}},this.checkoutUrl=new Cn(""),this.sessionData={},this.isInitialized=!1,this.isPrefetched=!1}initialize(t,n){this.applyConfig(n),this.isInitialized||(this.isInitialized=!0,this.clientId.next(t),this.hasCartIdDefined()&&this.createSession(!1).subscribe())}getCheckoutUrl(t){if(t)this.config.cartData.id=t;else{if(this.platformCart)return fn(this.platformCart()).pipe($n((t=>{t&&this.applyCartData(t)})),vn((()=>this.createSession().pipe(dn((t=>null==t?void 0:t.url))))));if(this.hasCheckoutUrl())return this.checkoutUrl}return this.createSession().pipe(dn((t=>null==t?void 0:t.url)))}getCheckoutSessionId(){return this.sessionData.checkoutSessionId||null}isRedirectEnabled(){var t;return!!(null===(t=this.config)||void 0===t?void 0:t.redirect)}hasCheckoutUrl(){return!!this.checkoutUrl.getValue()}hasCartIdDefined(){return!!this.config.cartData.id}applyCartData(t={}){const{customerData:n,...i}=t;n&&this.applyCustomerData(n),this.config.cartData=Vn(this.config.cartData,i)}applyConfig(t={}){this.config=Vn(this.config,t),t.cartId&&(this.config.cartData.id=t.cartId)}applyCustomerData(t={}){this.config.customerData=t}encodeCustomerData(t){Object.keys(this.config.customerData||{}).forEach((n=>{var i,r,e,o;"string"==typeof(null===(i=this.config.customerData)||void 0===i?void 0:i[n])&&this.config.customerData[n]?t.set(n,null===(r=this.config.customerData)||void 0===r?void 0:r[n]):(null===(e=this.config.customerData)||void 0===e?void 0:e[n])&&"object"==typeof(null===(o=this.config.customerData)||void 0===o?void 0:o[n])&&Object.keys(this.config.customerData[n]).forEach((i=>{var r;(null===(r=this.config.customerData)||void 0===r?void 0:r[n][i])&&t.set(`${n}.${i}`,this.config.customerData[n][i])}))}))}get platformCart(){var t,n;return null===(n=null===(t=window.Rally)||void 0===t?void 0:t.platform)||void 0===n?void 0:n.getCart}createSession(t=!0){var n;const i=Fn.persistent().get("rallyCheckoutSessionId"),r=Fn.persistent().get("rallyCheckoutCartId"),e=Fn.persistent().get("rallyCheckoutCartContent"),o=!(null===(n=this.config.cartData)||void 0===n?void 0:n.content)||Qn(this.config.cartData.content,e);if(r===this.config.cartData.id&&this.hasCheckoutUrl()&&o)return Sn({url:this.checkoutUrl.getValue(),checkoutSessionId:i});if(!this.hasCartIdDefined()&&!this.config.lineItems)return Sn({url:null,checkoutSessionId:null});this.clientId.getValue()&&this.config&&this.prepareSessionData(i,t);const s={method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(ri(this.sessionData,ei.Underscore))};return fn(fetch(`//${zn.api.baseUrl}/api/${zn.api.version}/checkout/auth`,s).then((t=>t.json()))).pipe(dn((t=>ri(t))),$n((t=>{this.checkoutUrl.next(t.url),this.isPrefetched||(this.isPrefetched=!0,this.prefetchCheckoutPage(t.url)),Fn.persistent().set("rallyCheckoutSessionId",t.checkoutSessionId),Fn.persistent().set("rallyCheckoutCartId",this.sessionData.cartId),this.sessionData.cart&&Fn.persistent().set("rallyCheckoutCartContent",this.sessionData.cart)})),un((()=>Sn({url:null,checkoutSessionId:null}))))}prefetchCheckoutPage(t){var n;const i=document.createElement("link");i.href=t,i.rel="prefetch",i.as="document",null===(n=document.querySelector("head"))||void 0===n||n.appendChild(i)}prepareSessionData(t,n=!0){var i,r,e,o;this.sessionData.clientId=this.clientId.getValue(),(null===(i=this.config.cartData)||void 0===i?void 0:i.id)&&(this.sessionData.cartId=null===(r=this.config.cartData)||void 0===r?void 0:r.id),(null===(e=this.config.cartData)||void 0===e?void 0:e.currency)&&(this.sessionData.cartCurrency=this.config.cartData.currency),(null===(o=this.config.cartData)||void 0===o?void 0:o.content)&&n&&(this.sessionData.cart=this.config.cartData.content),this.config.lineItems&&(this.sessionData.lineItems=this.config.lineItems),t&&(this.sessionData.checkoutSessionId=t)}};var si;!function(t){t.Redirect="redirect",t.Click="click"}(si||(si={}));const ui=new class{constructor(){this.createGlobalObject()}addInitFunction(t){window.Rally.init=t}addRefreshCheckoutSession(t){window.Rally.refreshCheckoutSession=t}addApplyCartData(t){window.Rally.applyCartData=t}addUpdateConfig(t){window.Rally.updateConfig=t}addApplyCustomerData(t){window.Rally.applyCustomerData=t}createGlobalObject(){window.Rally=window.Rally||{init:null}}};var ci;!function(t){t.Init="init"}(ci||(ci={}));const hi=new class{constructor(){this.refreshCheckoutSession=(t={},n)=>{this.applyCartData(t),oi.getCheckoutUrl(t.id).pipe(gn(1)).subscribe((t=>{n&&n({url:t})}))},this.applyCartData=(t={})=>{oi.applyCartData(t)},this.init=(t,n)=>{oi.initialize(t,n)},this.updateConfig=(t={})=>{oi.applyConfig(t)},this.applyCustomerData=t=>{oi.applyCustomerData(t)}}create(){ui.addInitFunction(this.init),ui.addRefreshCheckoutSession(this.refreshCheckoutSession),ui.addApplyCartData(this.applyCartData),ui.addUpdateConfig(this.updateConfig),this.handleActionQueue()}handleActionQueue(){const t=window.Rally.q;null==t||t.forEach((t=>{t.action===ci.Init&&this.init(t.clientId,t.configuration)}))}},li=1,ai=t=>(...n)=>({_$litDirective$:t,values:n});
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class fi{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,n,i){this._$Ct=t,this._$AM=n,this._$Ci=i}_$AS(t,n){return this.update(t,n)}update(t,n){return this.render(...n)}}
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const di=ai(class extends fi{constructor(t){var n;if(super(t),t.type!==li||"class"!==t.name||(null===(n=t.strings)||void 0===n?void 0:n.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((n=>t[n])).join(" ")+" "}update(t,[n]){var i,r;if(void 0===this.et){this.et=new Set,void 0!==t.strings&&(this.st=new Set(t.strings.join(" ").split(/\s/).filter((t=>""!==t))));for(const t in n)n[t]&&!(null===(i=this.st)||void 0===i?void 0:i.has(t))&&this.et.add(t);return this.render(n)}const e=t.element.classList;this.et.forEach((t=>{t in n||(e.remove(t),this.et.delete(t))}));for(const t in n){const i=!!n[t];i===this.et.has(t)||(null===(r=this.st)||void 0===r?void 0:r.has(t))||(i?(e.add(t),this.et.add(t)):(e.remove(t),this.et.delete(t)))}return q}}),vi=ai(class extends fi{constructor(t){var n;if(super(t),t.type!==li||"style"!==t.name||(null===(n=t.strings)||void 0===n?void 0:n.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((n,i)=>{const r=t[i];return null==r?n:n+`${i=i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${r};`}),"")}update(t,[n]){const{style:i}=t.element;if(void 0===this.ct){this.ct=new Set;for(const t in n)this.ct.add(t);return this.render(n)}this.ct.forEach((t=>{null==n[t]&&(this.ct.delete(t),t.includes("-")?i.removeProperty(t):i[t]="")}));for(const t in n){const r=n[t];null!=r&&(this.ct.add(t),t.includes("-")?i.setProperty(t,r):i[t]=r)}return q}});
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
function yi(t,n,i){return t?n():null==i?void 0:i()}let pi=class extends st{constructor(){hi.create(),super(),this.independentClickEventHandler="false",this.disabled="false",this.loading="false",this.customClass="",this.customText="",this.customType="button",this.redirect="true",this.loader="false",this.handleRedirect()}createRenderRoot(){return this}render(){const t={};this.isLoaderEnabled&&(t.position="relative");const n={[`${this.definedCustomButtonClass}`]:this.definedCustomButtonClass,"rally-btn":!this.definedCustomButtonClass},i={"rally-btn-text":!0,"rally-invisible":this.showSpinner};return L`
   <style>
    .rally-d-none {
      display: none !important;
    }
    .rally-btn {
      font-family: inherit;
      transition: opacity 1s;
      opacity: 1;
      border: transparent;
      width: 100%;
      height: 50px;
      padding: 14px 28px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      background-color: #221f20;
      border-radius: 4px;
      color: #fff;
      font-weight: 600;
      font-size: 15px;
      line-height: 22px;
      cursor: pointer;
      position: relative;
    }

    @media (max-width: 350px) {
      .rally-btn {
        padding: 14px;
      }
    }

    .rally-btn:hover, .rally-btn:focus {
      opacity: 0.75;
      color: #fff;
    }
    .rally-btn:disabled {
      cursor: not-allowed;
      pointer-events: none;
      opacity: 0.7;
    }

    .rally-invisible {
      opacity: 0;
    }

    .rally-loader-wrapper {
      width: 100%;
      height: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      position: absolute;
      background-color: transparent;
      top: 0;
      left: 0;
    }

    .rally-loader {
      width: 25px;
      height: 25px;
      position: relative;
    }

    .rally-spinner {
      border-radius: 50%;
      width: 20px;
      height: 20px;
      animation: spin 0.8s ease infinite;
      border-width: 3px;
      border: 3px solid white;
      border-top-color: transparent;
    }

    @keyframes spin {
      0% {
        transform: rotate(0deg);
      }
      100% {
        transform: rotate(360deg);
      }
    }
    </style>
      <button
        class=${di(n)}
        @click="${this.handleClick}"
        type="${this.customType}"
        style=${vi(t)}
      >
        <span>
          ${yi(this.showSpinner,(()=>L`<div class="rally-loader-wrapper">
              <div class="rally-loader">
                <div class="rally-spinner"></div>
              </div>
            </div>`),(()=>L``))}
          <span class=${di(i)}>
            ${yi(!!this.definedCustomButtonText,(()=>L`${this.definedCustomButtonText}`),(()=>L`Check out`))}
          </span>
        </span>
      </button>
    `}get isLoading(){return"false"!==this.loading}get isDisabled(){return"false"!==this.disabled}get showSpinner(){return this.isLoading&&this.isLoaderEnabled}get config(){return null==oi?void 0:oi.config}get isRedirectEnabled(){return"true"===this.redirect&&oi.isRedirectEnabled()}get definedCustomButtonClass(){var t;return this.customClass||(null===(t=this.config)||void 0===t?void 0:t.customButtonClass)}get definedCustomButtonText(){var t;return this.customText||(null===(t=this.config)||void 0===t?void 0:t.customButtonText)}get isLoaderEnabled(){var t;return"false"!==this.loader||!!(null===(t=this.config)||void 0===t?void 0:t.enableLoader)}get hasIndependentClickEventConfigured(){return"false"!==this.independentClickEventHandler}handleClick(){if(this.hasIndependentClickEventConfigured)return this.handleClickedEvent({}),void this.config.customActionsHandler(si.Click,{});this.isDisabled||this.isLoading&&this.isRedirectEnabled||this.handleClickAction()}handleAction(){var t;oi.getCheckoutUrl().pipe(dn((t=>{if(!t)return null;try{const n=new URL(t);return oi.encodeCustomerData(n.searchParams),n.toString()}catch(t){return null}})),(t=()=>{this.isRedirectEnabled&&(this.loading="false")},dt((function(n,i){try{n.subscribe(i)}finally{i.add(t)}}))),gn(1)).subscribe((t=>{var n,i,r,e;if(this.isRedirectEnabled)t&&!this.config.forceFallback?window.location.href=t:this.engageFailSafeOperation();else{const o={url:t,checkoutSessionId:oi.getCheckoutSessionId(),cartId:null===(i=null===(n=oi.config)||void 0===n?void 0:n.cartData)||void 0===i?void 0:i.id,platformCart:null===(e=null===(r=null==oi?void 0:oi.config)||void 0===r?void 0:r.cartData)||void 0===e?void 0:e.content};this.handleClickedEvent(o),this.config.customActionsHandler(si.Redirect,o)}}))}handleClickAction(){var t,n;this.loading="true",oi.clientId.getValue()?this.handleAction():oi.clientId.pipe((t=t=>!!t,dt((function(i,r){var e=0;i.subscribe(Yt(r,(function(i){return t.call(n,i,e++)&&r.next(i)})))}))),gn(1)).subscribe((()=>{this.handleAction()}))}engageFailSafeOperation(){var t,n;if(null===(t=this.config)||void 0===t?void 0:t.fallbackUrl)window.location.href=this.config.fallbackUrl;else if(null===(n=this.config)||void 0===n?void 0:n.fallbackButtonSelector){const t=document.querySelector(this.config.fallbackButtonSelector);t&&t.click()}else this.handleAction()}handleClickedEvent(t){const n={detail:t,bubbles:!0,composed:!0};this.dispatchEvent(new CustomEvent("clicked",n))}handleRedirect(){addEventListener("beforeunload",(()=>{this.loading="false"}),{capture:!0})}};pi.styles=((t,...n)=>{const i=1===t.length?t[0]:n.reduce(((n,i,r)=>n+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[r+1]),t[0]);return new v(i,f)})`

  `,i([ht({type:String,attribute:"independent-click-event-handler"})],pi.prototype,"independentClickEventHandler",void 0),i([ht({type:String})],pi.prototype,"disabled",void 0),i([ht({type:String})],pi.prototype,"loading",void 0),i([ht({type:String,attribute:"custom-class"})],pi.prototype,"customClass",void 0),i([ht({type:String,attribute:"custom-text"})],pi.prototype,"customText",void 0),i([ht({type:String,attribute:"custom-type"})],pi.prototype,"customType",void 0),i([ht({type:String})],pi.prototype,"redirect",void 0),i([ht({type:String})],pi.prototype,"loader",void 0),pi=i([(t=>n=>"function"==typeof n?((t,n)=>(window.customElements.define(t,n),n))(t,n):((t,n)=>{const{kind:i,elements:r}=n;return{kind:i,elements:r,finisher(n){window.customElements.define(t,n)}}})(t,n))("rally-checkout-button")],pi);export{pi as RallyCheckoutButton};
